language: node_js
install:
- npm install -g grunt-cli
- npm install --quiet
before_script:
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- npm start &
- sleep 3
script:
- grunt release
- grunt coveralls
cache:
  directories:
  - node_modules
  - bower_components
before_deploy: 
- grunt jar
deploy:
  provider: releases
  api_key:
    secure: Sulvo7PmYlUASI7uPk8QhL/IdkwKfQ3rKesHcExkm9FwamoI40NDSn0Av33TtkTXWAsI3ttdW9kA5rUinhtMfS2DUJevP9saVOX8LDVojXIBiSCPDVmsLuPY82bBH+Kr0CiPVcCQnOdc5osVP9fC90z0yFraGTXEW5Bzuo4l9iw=
  file: comprot-frontend-1.0.0-SNAPSHOT.jar
  on:
    tags: true
    repo: medien-dresden/comprot-frontend
    branch: develop
